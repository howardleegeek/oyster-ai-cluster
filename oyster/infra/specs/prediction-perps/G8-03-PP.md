---
task_id: G8-03-PP
project: prediction-perps
priority: 1
depends_on: []
modifies: ["src/smart_contracts/PredictionMarket.sol", "tests/test_smart_contracts.py"]
executor: glm
---
task_id: G8-03-PP  
project: prediction-perps  
priority: 1  
depends_on: []  
modifies: ["src/smart_contracts/PredictionMarket.sol", "tests/test_smart_contracts.py"]  
---  
## 目标  
增强智能合约以支持更复杂的预测市场逻辑。  

## 技术方案  
1. 在智能合约中添加对多结果预测市场的支持。  
2. 实现动态市场定价机制，根据参与者和资金流动调整赔率。  
3. 添加事件日志，以便前端和AI模块可以实时跟踪市场变化。  
4. 编写Solidity测试，确保新合约逻辑的正确性。  

## 约束  
- 在现有代码库内修改，不新建超过3个文件。  
- 不留 TODO/FIXME/placeholder。  
- 编写基础测试，确保新合约逻辑按预期工作。  

## 验收标准  
- [ ] 多结果预测市场在智能合约中正确实现。  
- [ ] 动态市场定价机制根据参与者行为和资金流动进行调整。  
- [ ] 事件日志正确记录市场变化。  
- [ ] pytest 全绿。  

## 不要做  
- 不重构现有代码。  
- 不改 UI/CSS。