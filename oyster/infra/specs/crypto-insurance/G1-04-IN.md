---
task_id: G1-04-IN
project: crypto-insurance
priority: 2
depends_on: []
modifies: ["src/backend/api/insurance_api.py", "tests/test_insurance_api.py"]
executor: glm
---
task_id: G1-04-IN  
project: crypto-insurance  
priority: 2  
depends_on: []  
modifies: ["src/backend/api/insurance_api.py", "tests/test_insurance_api.py"]  
---  
## 目标  
实现后端 API，用于处理保险购买请求并与智能合约交互。  

## 技术方案  
- 在 `insurance_api.py` 中定义 `purchase_insurance` 端点，接受保费和赔付金额作为参数。  
- 调用智能合约的 `purchaseInsurance` 方法，使用 Web3 库与区块链交互。  
- 返回交易结果给前端。  
- 在 `tests/test_insurance_api.py` 中编写测试用例，模拟 API 调用并验证响应。  

## 约束  
- 仅修改 `insurance_api.py` 和 `tests/test_insurance_api.py` 文件。  
- 不留 TODO/FIXME/placeholder。  
- 编写至少3个测试用例，涵盖成功和失败的场景。  

## 验收标准  
- [ ] API 端点正确处理保险购买请求。  
- [ ] 与智能合约的交互成功执行。  
- [ ] 测试用例覆盖主要场景。  
- [ ] pytest 测试全绿。  

## 不要做  
- 不修改 UI/CSS 相关代码。  
- 不引入新的外部依赖。