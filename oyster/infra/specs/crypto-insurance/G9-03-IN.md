---
task_id: G9-03-IN
project: crypto-insurance
priority: 1
depends_on: []
modifies: ["src/policy_management/policy_service.py", "tests/test_policy_service.py"]
executor: glm
---
task_id: G9-03-IN
project: crypto-insurance
priority: 1
depends_on: []
modifies: ["src/policy_management/policy_service.py", "tests/test_policy_service.py"]
---
## 目标
实现保单管理的自动化处理，减少人工干预。

## 技术方案
- 引入工作流引擎，自动处理保单创建、更新和终止。
- 添加保单状态机，确保状态转换的合法性。
- 实现保单数据的自动验证和错误处理。
- 集成通知系统，实时通知用户保单状态变化。

## 约束
- 在现有代码库内修改，不新建超过3个文件。
- 不留 TODO/FIXME/placeholder。
- 写基础测试，确保自动化处理功能正常。

## 验收标准
- [ ] 工作流引擎正确处理保单生命周期事件。
- [ ] 保单状态机覆盖所有可能的状态和转换。
- [ ] 自动验证和错误处理机制捕获主要异常。
- [ ] 通知系统实时发送状态变化通知。
- [ ] pytest 全绿。

## 不要做
- 不重构现有代码。
- 不改 UI/CSS。