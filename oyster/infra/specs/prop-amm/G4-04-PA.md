---
task_id: G4-04-PA
project: prop-amm
priority: 3
depends_on: ["G4-01-PA", "G4-02-PA", "G4-03-PA"]
modifies: ["src/dex/dex.py", "tests/dex/dex_test.py"]
executor: glm
---
task_id: G4-04-PA  
project: prop-amm  
priority: 3  
depends_on: ["G4-01-PA", "G4-02-PA", "G4-03-PA"]  
modifies: ["src/dex/dex.py", "tests/dex/dex_test.py"]  
---  
## 目标  
整合基础流动性池、MEV 保护和 AI 市场做市功能，构建完整的去中心化交易所（DEX）。

## 技术方案  
- 在 Python 中实现 DEX 的核心逻辑，调用流动性池、MEV 保护和 AI 市场做市模块。  
- 在 `dex.py` 中实现 DEX 的核心功能。  
- 在 `dex_test.py` 中编写集成测试，验证 DEX 整体功能的正确性和稳定性。

## 约束  
- 在现有代码库内修改，不新建超过3个文件。  
- 不留 TODO/FIXME/placeholder。  
- 编写基础测试，确保 DEX 功能的完整性和可靠性。

## 验收标准  
- [ ] DEX 能够正确处理交易请求，提供流动性。  
- [ ] MEV 保护机制有效，防止交易被攻击。  
- [ ] AI 市场做市功能提高交易效率。  
- [ ] pytest 全绿。

## 不要做  
- 不重构现有代码。  
- 不改 UI/CSS。