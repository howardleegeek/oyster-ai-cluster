---
task_id: G6-03-PA
project: prop-amm
priority: 1
depends_on: []
modifies: ["src/amm/mev_protection.py", "tests/test_mev_protection.py"]
executor: glm
---
task_id: G6-03-PA  
project: prop-amm  
priority: 1  
depends_on: []  
modifies: ["src/amm/mev_protection.py", "tests/test_mev_protection.py"]  

## 目标
实现 MEV 保护机制。

## 技术方案
在 `mev_protection.py` 中引入批量拍卖机制（Batch Auction）来减少 MEV 攻击的风险。实现交易排序的随机化，并确保在交易执行前无法被预测。通过 `pytest` 编写测试，验证 MEV 保护的有效性。

## 约束
- 仅修改 `mev_protection.py` 和相应的测试文件。
- 不添加任何 TODO/FIXME 注释。
- 编写至少 4 个单元测试，覆盖批量拍卖和交易排序随机化。

## 验收标准
- [ ] 批量拍卖机制正确执行。
- [ ] 交易排序随机化有效防止预测。
- [ ] pytest 全绿。

## 不要做
- 不重构现有的 MEV 保护代码。
- 不改 UI/CSS。